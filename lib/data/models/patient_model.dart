import '../../domain/entities/patient.dart';

class PatientModel extends Patient {
  const PatientModel({
    required int id,
    required String firstName,
    required String middleName,
    required String lastName,
    required DateTime dateOfBirth,
    required int age,
    required String gender,
    required String phoneNumber,
    required String email,
    required String patientAccountId,
    required String affiliation,
    required String affiliationDisplay,
    required String militaryUnit,
    required String militaryRank,
    required String serialNumber,
    required String department,
    required String position,
    String? profilePicture,
    String? profilePictureUrl,
    required DateTime createdAt,
    required DateTime updatedAt,
  }) : super(
          id: id,
          firstName: firstName,
          middleName: middleName,
          lastName: lastName,
          dateOfBirth: dateOfBirth,
          age: age,
          gender: gender,
          phoneNumber: phoneNumber,
          email: email,
          patientAccountId: patientAccountId,
          affiliation: affiliation,
          affiliationDisplay: affiliationDisplay,
          militaryUnit: militaryUnit,
          militaryRank: militaryRank,
          serialNumber: serialNumber,
          department: department,
          position: position,
          profilePicture: profilePicture,
          profilePictureUrl: profilePictureUrl,
          createdAt: createdAt,
          updatedAt: updatedAt,
        );

  factory PatientModel.fromJson(Map<String, dynamic> json) {
    return PatientModel(
      id: json['id'] as int,
      firstName: json['first_name'] as String,
      middleName: json['middle_name'] as String,
      lastName: json['last_name'] as String,
      dateOfBirth: DateTime.parse(json['date_of_birth'] as String),
      age: json['age'] as int,
      gender: json['gender'] as String,
      phoneNumber: json['phone_number'] as String,
      email: json['email'] as String,
      patientAccountId: json['patient_account_id'] as String,
      affiliation: json['affiliation'] as String,
      affiliationDisplay: json['affiliation_display'] as String,
      militaryUnit: json['military_unit'] as String? ?? '',
      militaryRank: json['military_rank'] as String? ?? '',
      serialNumber: json['serial_number'] as String? ?? '',
      department: json['department'] as String? ?? '',
      position: json['position'] as String? ?? '',
      profilePicture: json['profile_picture'] as String?,
      profilePictureUrl: json['profile_picture_url'] as String?,
      createdAt: DateTime.parse(json['created_at'] as String),
      updatedAt: DateTime.parse(json['updated_at'] as String),
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'first_name': firstName,
      'middle_name': middleName,
      'last_name': lastName,
      'date_of_birth': dateOfBirth.toIso8601String(),
      'age': age,
      'gender': gender,
      'phone_number': phoneNumber,
      'email': email,
      'patient_account_id': patientAccountId,
      'affiliation': affiliation,
      'affiliation_display': affiliationDisplay,
      'military_unit': militaryUnit,
      'military_rank': militaryRank,
      'serial_number': serialNumber,
      'department': department,
      'position': position,
      'profile_picture': profilePicture,
      'profile_picture_url': profilePictureUrl,
      'created_at': createdAt.toIso8601String(),
      'updated_at': updatedAt.toIso8601String(),
    };
  }
}
